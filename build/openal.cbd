setstdout "${STDOUT_LOG}"
setstderr "${STDERR_LOG}"

@!call "${CC}" -E "${BUILD_DIR}/openal.c ${CPPFLAGS}"

do ifnret 0
   setstdout ''
   setstderr ''

   echo 'you\'re missing OpenAL'
   echo 'continuing on without it...'

   uninvoke 0
done

setstdout ''
setstderr ''

# --

CFLAGS += ' -DUSE_OPENAL'

# --

do ifplat unix
   CFLAGS += ' `pkg-config --cflags openal`'
   LDFLAGS += ' `pkg-config --libs openal`'
else
   LDFLAGS += ' -lOpenAL32'
done
