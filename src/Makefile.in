

CC = @CC@

RM = @rm -f -v


IFLAGS = -Iinclude

OFLAGS = @CFLAGS@

DFLAGS = @DFLAGS@ -DUNIX


CFLAGS = ${IFLAGS} ${OFLAGS} ${DFLAGS}


LIBRARIES = `allegro-config --libs` @LIBS@


OBJECTS = apu.o audio.o core.o cpu.o gui.o input.o papu.o ppu.o \
          rom.o main.o mmc.o video.o


all : fakenes


fakenes : ${OBJECTS}

	${CC} ${OBJECTS} -o fakenes ${LIBRARIES}


.SUFFIXES : .c

%.o : %.c

	${CC} -c $< -o $@ ${CFLAGS}


apu.o : apu.c include/apu.h include/cpu.h include/misc.h

audio.o : audio.c include/audio.h

core.o : core.c include/core.h include/core/codes.h \
         include/core/tables.h

cpu.o : cpu.c include/core.h include/cpu.h include/input.h \
        include/misc.h include/mmc.h include/papu.h include/ppu.h \
        include/rom.h

gui.o : gui.c include/apu.h include/audio.h include/cpu.h include/data.h \
        include/gui/dialogs.h include/gui.h include/gui2.h \
        include/misc.h include/papu.h include/rom.h include/video.h \
        include/timing.h

input.o : input.c include/gui.h include/input.h include/misc.h \
          include/ppu.h include/rom.h include/video.h include/timing.h

main.o : main.c include/audio.h include/build.h include/cpu.h \
         include/data.h include/gui.h include/input.h include/misc.h \
         include/mmc.h include/papu.h include/ppu.h include/rom.h \
         include/video.h include/timing.h
         
mmc.o : mmc.c include/mmc/aorom.h include/mmc/cnrom.h include/cpu.h \
        include/mmc/dreams.h include/gui.h include/misc.h include/mmc.h \
        include/mmc/mmc1.h include/mmc/mmc2.h include/mmc/mmc3.h \
        include/mmc/mmc4.h include/ppu.h include/rom.h include/timing.h \
        include/mmc/unrom.h

papu.o : papu.c include/apu.h include/audio.h include/misc.h \
         include/papu.h

ppu.o : ppu.c include/cpu.h include/input.h include/misc.h include/mmc.h \
        include/ppu.h include/video.h

rom.o : rom.c include/misc.h include/ppu.h include/rom.h

video.o : video.c include/cpu.h include/data.h include/input.h \
          include/misc.h include/ppu.h include/video.h include/timing.h \
          include/rom.h


clean :

	${RM} ${OBJECTS}

	${RM} fakenes
