# Threading is not supported under DOS for now.
ifplat msdos uninvoke 0

do ifplat unix
	# HawkThreads requires Pthreads on Unix.
	do ifnot "${HAVE_PTHREADS}"='true'
		if "${QUIET_BOOTSTRAP}"='false' echo 'Boostrap: (Warning) Pthreads missing, skipping HawkThreads.'
		uninvoke 0
	done
done

# Compile directories.
COMPILE_HAWKTHREADS_DIRECTORY = "${COMPILE_FRAMEWORKS_PATH}HawkThreads"
COMPILE_HAWKTHREADS_PATH = "${COMPILE_HAWKTHREADS_DIRECTORY}${PATH_SEPARATOR}"

COMPILE_HAWKTHREADS_DIRECTORY_SRC = "${COMPILE_HAWKTHREADS_PATH}src"

do ifnopt clean
	ifnexist "${COMPILE_HAWKTHREADS_DIRECTORY}"	@mkdir "${COMPILE_HAWKTHREADS_DIRECTORY}"
	ifnexist "${COMPILE_HAWKTHREADS_DIRECTORY_SRC}"	@mkdir "${COMPILE_HAWKTHREADS_DIRECTORY_SRC}"
done

CLEAN_DIRECTORIES := "${COMPILE_HAWKTHREADS_DIRECTORY_SRC}"
CLEAN_DIRECTORIES := "${COMPILE_HAWKTHREADS_DIRECTORY}"

# Source paths.
HAWKTHREADS_PATH = "${FRAMEWORK_PATH}HawkThreads${PATH_SEPARATOR}"
HAWKTHREADS_PATH_SRC = "${HAWKTHREADS_PATH}src${PATH_SEPARATOR}"
HAWKTHREADS_PATH_INCLUDE = "${HAWKTHREADS_PATH}include${PATH_SEPARATOR}"

# Source files.
SOURCE_FILES := "${HAWKTHREADS_PATH_SRC}htcondition.c"
SOURCE_FILES := "${HAWKTHREADS_PATH_SRC}hthread.c"
SOURCE_FILES := "${HAWKTHREADS_PATH_SRC}htmutex.c"

# Preprocessor flags.
CPPFLAGS := "-DUSE_HAWKTHREADS=1 -I${HAWKTHREADS_PATH_SRC} -I${HAWKTHREADS_PATH_INCLUDE}"
